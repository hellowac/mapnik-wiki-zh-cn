<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Logging - mapnik-wiki-zh-cn 1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">mapnik-wiki-zh-cn 1.0 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">mapnik-wiki-zh-cn 1.0 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introductory Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="About-Mapnik.html">About Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mapnik-Installation.html">Mapnik Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="LearningMapnik.html">Learning Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notes-and-caveats.html">Notes and caveats</a></li>
<li class="toctree-l1"><a class="reference internal" href="Related-projects-and-utilities.html">Related projects and utilties</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Mapnik API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="XMLConfigReference.html">Mapnik configuration XML</a></li>
<li class="toctree-l1"><a class="reference internal" href="SymbologySupport.html">Symbology Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PluginArchitecture.html">Plugin Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/mapnik/mapnik/blob/master/INSTALL.md">Building Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mapnik2.html">Mapnik2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="MapnikReleases.html">Mapnik Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/mapnik">Mailing List</a></li>
<li class="toctree-l1"><a class="reference external" href="http://webchat.freenode.net/?channels=#mapnik">#mapnik channel on irc.freenode.net Webchat</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code-sprint.html">Code sprint</a></li>
<li class="toctree-l1"><a class="reference external" href="http://173.255.217.246:8000/mapnik_trac/wiki/MapnikCodeSprint/MCS01">Code sprint 2010 - Committers and Cartographers London, England, 24-26 September 2010</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/Logging.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="logging">
<h1>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h1>
<p>Mapnik &gt;= 2.1.x supports a variety of logging options to make it possible to see what is happening under the hood.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The logging system has concepts that need to be understood by both users who want to turn on or off logging at runtime and by developers seeking to debug their code and offer good logging possibilities for user.</p>
<p>The total possible logging functionality is determined at compile time, but the logging verbosity can also be controlled at runtime.</p>
</section>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Link to this heading">¶</a></h2>
<section id="severity-levels">
<h3>Severity levels<a class="headerlink" href="#severity-levels" title="Link to this heading">¶</a></h3>
<p>Severity levels are the way Mapnik categorizes logging messages. Each logging message that a Mapnik developer adds to the codebase will have a severity level.</p>
<p>Here are all the macros available to Mapnik C++ developers:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mapnik/debug.hpp&gt;</span>

<span class="c1">// Output a string in WARN severity level</span>
<span class="n">MAPNIK_LOG_WARN</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;This is a warning message&quot;</span><span class="p">;</span>

<span class="c1">// Output a string in DEBUG severity level</span>
<span class="n">MAPNIK_LOG_DEBUG</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;This is a debug message&quot;</span><span class="p">;</span>

<span class="c1">// Output a string in ERROR severity level</span>
<span class="n">MAPNIK_LOG_ERROR</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;This is an error message&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Also, at runtime, severity level can be used by users to control verbosity.</p>
<p>For example if a user wants to disable all log output, here is how that would be done in python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mapnik</span>
<span class="n">mapnik</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="o">.</span><span class="n">severity_type</span><span class="o">.</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Statements that use <code class="docutils literal notranslate"><span class="pre">MAPNIK_LOG_ERROR</span></code> inside the Mapnik code, will be always be logged if Mapnik is compiled with the default settings and the runtime settings are unchanged. This is because the <code class="docutils literal notranslate"><span class="pre">DEFAULT_LOG_SEVERITY</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">error</span></code> at compile time and therefore the <code class="docutils literal notranslate"><span class="pre">mapnik.severity_type</span></code> (for example in python) is <code class="docutils literal notranslate"><span class="pre">mapnik.severity_type.Error</span></code>. Besides the <code class="docutils literal notranslate"><span class="pre">error</span></code> level, there are three other named levels: <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code>, and <code class="docutils literal notranslate"><span class="pre">none</span></code>. The <code class="docutils literal notranslate"><span class="pre">none</span></code> level disables all logging and ensures Mapnik is completely silent. The <code class="docutils literal notranslate"><span class="pre">warn</span></code> level will trigger logging messages that give more verbose information on what Mapnik is doing and is designed to help users understand program behavior. When <code class="docutils literal notranslate"><span class="pre">warn</span></code> is enabled users will see both <code class="docutils literal notranslate"><span class="pre">error</span></code> and <code class="docutils literal notranslate"><span class="pre">warn</span></code> level severity messages logged. The last level is <code class="docutils literal notranslate"><span class="pre">debug</span></code> which reveals all possible logging messages and is designed for developers to reveal possible bugs at runtime or for users to see all possible information to provide that in bug reports to developers.</p>
</section>
<section id="error-level-vs-exceptions">
<h3>Error level vs Exceptions<a class="headerlink" href="#error-level-vs-exceptions" title="Link to this heading">¶</a></h3>
<p>Mapnik supports exceptions in the C++ API and its bindings like python and node.js. Exceptions are throw when an error is encountered that should be handled by the application calling Mapnik. Mapnik basically is saying, this happened (the exception) and you need to do something about it.</p>
<p>The Error level of logging is different. It can be used along with exceptions to output more contextual information about what caused the exception. But the primary intended usage is for when throwing an exception is not warranted but is it still important to communicate that something happened during program execution that was either unexpected or not optimal. For example, when rendering a map if a png symbol referenced by a style is not found it does not make sense to stop rendering altogether by throwing an exception. Instead rendering continues till the end but the missing symbol file path will be logged using the <code class="docutils literal notranslate"><span class="pre">error</span></code> level.</p>
</section>
<section id="logging-vs-statistics">
<h3>Logging vs. Statistics<a class="headerlink" href="#logging-vs-statistics" title="Link to this heading">¶</a></h3>
<p>Here we refer to &quot;Logging&quot; as messages printed to output that describe what Mapnik is doing, including both things that could be considered unexpected errors and normal execution that might be valuable to know happened.</p>
<p>Statistics are also messages printed to output, but are specifically for reporting how much time certain operations took to execute.</p>
<p>It is possible to control logging messages using a combination of compile time and runtime options. Statistic messages on enabled at compile time and cannot be turned off at runtime.</p>
</section>
</section>
<section id="compile-time-options">
<h2>Compile time options<a class="headerlink" href="#compile-time-options" title="Link to this heading">¶</a></h2>
<p>When you configure Mapnik you have several options that can be set during the configure stage of building which impact how logging behaves.</p>
<ul class="simple">
<li><p>ENABLE_STATS - Default <code class="docutils literal notranslate"><span class="pre">False</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> then timing output will be printed to <code class="docutils literal notranslate"><span class="pre">stderr</span></code> of a variety of performance critical code paths. As of Mapnik 2.2 only datasource plugins respond to this option by providing progress timers. In the future more performance critical code paths will gain progress timers. Feel free to create an issue to request more specific coverage.</p></li>
<li><p>ENABLE_LOG - This option controls which severity levels should be compiled into the Mapnik binary. The default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>. This default means that not all severity types will be compiled into Mapnik: only <code class="docutils literal notranslate"><span class="pre">error</span></code> and <code class="docutils literal notranslate"><span class="pre">none</span></code> levels will be available to toggle at runtime. The reason for this is to ensure that Mapnik runs fast by default, because verbose logging can slow down code execution. If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> then logging of all severity types will be enabled and available at runtime. NOTE: This option defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">DEBUG=True</span></code> (see option below).</p></li>
<li><p>DEFAULT_LOG_SEVERITY - The <code class="docutils literal notranslate"><span class="pre">DEFAULT_LOG_SEVERITY</span></code> option controls which severity level will be used by default at runtime - the value it will be initialized to at startup. It is not recommended to change this option at configuration time, unless you are a developer or doing customized packaging of Mapnik. Users can change the severity level easily at runtime. The default level is <code class="docutils literal notranslate"><span class="pre">error</span></code>. Other named severity levels are: <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code>, <code class="docutils literal notranslate"><span class="pre">none</span></code>. An important caveat is that the <code class="docutils literal notranslate"><span class="pre">ENABLE_LOG</span></code> option controls which severity levels are compiled into Mapnik by default, so setting <code class="docutils literal notranslate"><span class="pre">DEFAULT_LOG_SEVERITY</span></code> to <code class="docutils literal notranslate"><span class="pre">warn</span></code> or <code class="docutils literal notranslate"><span class="pre">debug</span></code> will have no effect unless <code class="docutils literal notranslate"><span class="pre">ENABLE_LOG</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p>DEBUG - Default <code class="docutils literal notranslate"><span class="pre">False</span></code>. This flag adds various compile flags that add debugging information to the Mapnik binary. Mapnik runs slower and the binary will be much larger when build in debug mode than release mode (<code class="docutils literal notranslate"><span class="pre">DEBUG=False</span></code>). For this reason - that performance is not critical if you are building in debug mode - <code class="docutils literal notranslate"><span class="pre">ENABLE-LOG</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> in this mode to ensure that all possible logging verbosity is available.</p></li>
<li><p>RENDERING_STATS - This is an experimental option that may be removed in future releases. It defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>, but can be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to enable verbose logging of rendering behavior providing the timing of style and layer processing.</p></li>
</ul>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>To compile Mapnik in release mode but will all logging severity levels enabled do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span><span class="nv">ENABLE_LOG</span><span class="o">=</span>True<span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span>False
</pre></div>
</div>
<p>To compile Mapnik in release mode but will all logging severity levels and performance stats enable:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span><span class="nv">ENABLE_LOG</span><span class="o">=</span>True<span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span>False<span class="w"> </span><span class="nv">ENABLE_STATS</span><span class="o">=</span>True
</pre></div>
</div>
<p>To compile Mapnik such that it is completely silent by default:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span><span class="nv">DEFAULT_LOG_SEVERITY</span><span class="o">=</span>none<span class="w"> </span><span class="nv">ENABLE_LOG</span><span class="o">=</span>False<span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span>False<span class="w"> </span><span class="nv">ENABLE_STATS</span><span class="o">=</span>False
</pre></div>
</div>
<p>NOTE: options are cached in the <code class="docutils literal notranslate"><span class="pre">config.py</span></code> file. So, make sure to override any options that you previously used, or remove them from your <code class="docutils literal notranslate"><span class="pre">config.py</span></code> file.</p>
</section>
</section>
<section id="the-runtime-logger">
<h2>The runtime logger<a class="headerlink" href="#the-runtime-logger" title="Link to this heading">¶</a></h2>
<p>At runtime Mapnik can be told to log more or less or not at all. For example, in python if you want all logging to be suppressed you can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mapnik</span>
<span class="n">mapnik</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="o">.</span><span class="n">severity_type</span><span class="o">.</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, if you want to set it back to the default setting do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapnik</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="o">.</span><span class="n">severity_type</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, if your Mapnik build has been compiled with <code class="docutils literal notranslate"><span class="pre">ENABLE_LOG=True</span></code> then you can enable <code class="docutils literal notranslate"><span class="pre">debug</span></code> or <code class="docutils literal notranslate"><span class="pre">warn</span></code> levels:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapnik</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="o">.</span><span class="n">severity_type</span><span class="o">.</span><span class="n">Warn</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">mapnik</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="o">.</span><span class="n">severity_type</span><span class="o">.</span><span class="n">Debug</span><span class="p">)</span>
</pre></div>
</div>
<p>In C++ to use the runtime logger from your program first include this header:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mapnik/debug.hpp&gt;</span>
</pre></div>
</div>
<p>Then in your C++ code you could disable all logging by doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapnik</span><span class="p">::</span><span class="n">logger</span><span class="p">::</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">set_severity</span><span class="p">(</span><span class="n">mapnik</span><span class="p">::</span><span class="n">logger</span><span class="p">::</span><span class="n">none</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="developer-best-practices">
<h2>Developer Best practices<a class="headerlink" href="#developer-best-practices" title="Link to this heading">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">ENABLE_LOG</span></code> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> the logging framework optimizes away <code class="docutils literal notranslate"><span class="pre">Warn</span></code> and <code class="docutils literal notranslate"><span class="pre">Debug</span></code> logging macros leaving in place all <code class="docutils literal notranslate"><span class="pre">Error</span></code> macros, since these are considered useful enough to be show no matter what and not likely to harm performance.</p>
<p>But if you want to put logging in performance critical code or need to perform complex code before outputting a string to debug, then it's better to disable the macro manually to avoid the chance that it adds overhead even if not used. The way to do this is to wrap the entire block of code in <code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">MAPNIK_LOG</span></code>.</p>
<p>Here is an example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mapnik/debug.hpp&gt;</span>
<span class="p">...</span>
<span class="cp">#ifdef MAPNIK_LOG</span>
<span class="w">  </span><span class="c1">// here we need to output a string that will be output in DEBUG severity level:</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">connection</span><span class="o">-&gt;</span><span class="n">get_zoom_from_sql_call</span><span class="p">();</span>
<span class="w">  </span><span class="n">MAPNIK_LOG_DEBUG</span><span class="p">(</span><span class="n">cairo_renderer</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Log the variable &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, visible at DEBUG severity level&quot;</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, hellowac
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Logging</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#concepts">Concepts</a><ul>
<li><a class="reference internal" href="#severity-levels">Severity levels</a></li>
<li><a class="reference internal" href="#error-level-vs-exceptions">Error level vs Exceptions</a></li>
<li><a class="reference internal" href="#logging-vs-statistics">Logging vs. Statistics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compile-time-options">Compile time options</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-runtime-logger">The runtime logger</a></li>
<li><a class="reference internal" href="#developer-best-practices">Developer Best practices</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f115507d"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    </body>
</html>