<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Tutorial 1 -- Getting started in Python - mapnik-wiki-zh-cn 1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">mapnik-wiki-zh-cn 1.0 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">mapnik-wiki-zh-cn 1.0 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introductory Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="About-Mapnik.html">About Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mapnik-Installation.html">Mapnik Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="LearningMapnik.html">Learning Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notes-and-caveats.html">Notes and caveats</a></li>
<li class="toctree-l1"><a class="reference internal" href="Related-projects-and-utilities.html">Related projects and utilties</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Mapnik API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="XMLConfigReference.html">Mapnik configuration XML</a></li>
<li class="toctree-l1"><a class="reference internal" href="SymbologySupport.html">Symbology Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PluginArchitecture.html">Plugin Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/mapnik/mapnik/blob/master/INSTALL.md">Building Mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mapnik2.html">Mapnik2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="MapnikReleases.html">Mapnik Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/mapnik">Mailing List</a></li>
<li class="toctree-l1"><a class="reference external" href="http://webchat.freenode.net/?channels=#mapnik">#mapnik channel on irc.freenode.net Webchat</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code-sprint.html">Code sprint</a></li>
<li class="toctree-l1"><a class="reference external" href="http://173.255.217.246:8000/mapnik_trac/wiki/MapnikCodeSprint/MCS01">Code sprint 2010 - Committers and Cartographers London, England, 24-26 September 2010</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/GettingStartedInPython.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="tutorial-1-getting-started-in-python">
<h1>Tutorial 1 -- Getting started in Python<a class="headerlink" href="#tutorial-1-getting-started-in-python" title="Link to this heading">¶</a></h1>
<p><strong>Warning: the current Python bindings offer only <a class="reference external" href="https://github.com/mapnik/python-mapnik/issues/7">limited support</a> for Mapnik 3 and are <a class="reference external" href="https://github.com/mapnik/python-mapnik/issues/184">barely documented</a>.</strong></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>This tutorial will ensure that Mapnik and its Python bindings are properly installed and introduce you to some of the basic programming concepts for Mapnik.</p>
</section>
<section id="step-1-check-installation">
<h2>Step 1: check installation<a class="headerlink" href="#step-1-check-installation" title="Link to this heading">¶</a></h2>
<p>Make sure you have mapnik installed. You should be able to open a terminal and type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mapnik-config -v # should return a version number.
</pre></div>
</div>
<p>This tutorial expects Mapnik 2.x or greater. Older versions do not provide the <code class="docutils literal notranslate"><span class="pre">mapnik-config</span></code> program, so we recommend upgrading.</p>
<p>Please note that if you are using mapnik 2.0.0 then you will need to adjust the &quot;mapnik&quot; module name to &quot;mapnik2&quot; in the Python commands. Refer to <a class="reference internal" href="#mapnik2"><span class="xref myst">mapnik2</span></a> for details of the naming convention.</p>
<p>Please also note that unlike Mapnik 2.x, <a class="reference external" href="https://github.com/mapnik/mapnik/blob/master/CHANGELOG.md#300">version 3.x does not include Python bindings anymore</a>. You can find the new Python bindings <a class="reference external" href="https://github.com/mapnik/python-mapnik">here</a>.</p>
<p>Next test the Python bindings. You should be able to open a terminal and type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python -c &quot;import mapnik;print mapnik.__file__&quot; # should return the path to the python bindings and no errors
</pre></div>
</div>
<p>If the above does not work (e.g. throws an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>) then please go back and ensure <a class="reference internal" href="Mapnik-Installation.html"><span class="doc std std-doc">Mapnik</span></a> and the <a class="reference external" href="https://github.com/mapnik/python-mapnik/blob/master/README.md">Mapnik Python bindings</a> are properly installed. If you need help, sign up for the <a class="reference external" href="http://mapnik.org/contact/">mailing list</a> to ask questions or join the <a class="reference internal" href="#irc://irc.freenode.net/mapnik"><span class="xref myst">#mapnik room on freenode IRC</span></a></p>
</section>
<section id="step-2">
<h2>Step 2<a class="headerlink" href="#step-2" title="Link to this heading">¶</a></h2>
<p>Now, we need some data to render. Let's use a shapefile of world border polygons from <a class="reference external" href="http://naturalearthdata.com">http://naturalearthdata.com</a>. Download the data from this wiki's local cache <a class="reference download internal" download="" href="_downloads/c53a18809478622f2dbf8595ab2e8113/110m-admin-0-countries.zip"><span class="xref download myst">here</span></a> or directly from the <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/110m/cultural/ne_110m_admin_0_countries.zip">Natural Earth Data site</a>. Unzip the archive in an easily accessible location of your choosing. In <em>Step 3</em> we will be referencing the path to this shapefile in Python code, so make sure you know where you put it.</p>
<p>Once unzipped, you should see four files like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ne_110m_admin_0_countries.shp
ne_110m_admin_0_countries.shx
ne_110m_admin_0_countries.dbf
ne_110m_admin_0_countries.prj
</pre></div>
</div>
<p>To download and unzip on the command line with the do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wget https://github.com/mapnik/mapnik/wiki/data/110m-admin-0-countries.zip
unzip 110m-admin-0-countries.zip # creates ne_110m_admin_0_countries.shp
</pre></div>
</div>
</section>
<section id="step-3">
<h2>Step 3<a class="headerlink" href="#step-3" title="Link to this heading">¶</a></h2>
<p>Now we're going to program in Python and Mapnik, using sample code and the Python interpreter.</p>
<p>The idea here is not that you have to interact with Mapnik via Python, but that this is a good way to build foundational skills for how Mapnik works.</p>
<p>So, let's begin! Open a Python interpreter simply by typing in your terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python
</pre></div>
</div>
<p>The code below can be pasted into your interpreter. Ideally paste line by line so you can confirm each step is working. The commented lines (#) should be able to be pasted without trouble, but depending on your interpreter setting may cause errors.</p>
<section id="import-mapnik">
<h3>Import Mapnik<a class="headerlink" href="#import-mapnik" title="Link to this heading">¶</a></h3>
<p>Import the Mapnik Python bindings:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import mapnik
</pre></div>
</div>
</section>
<section id="create-a-map">
<h3>Create a Map<a class="headerlink" href="#create-a-map" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span> <span class="c1"># create a map with a given width and height in pixels</span>
<span class="c1"># note: m.srs will default to &#39;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs&#39;</span>
<span class="c1"># the &#39;map.srs&#39; is the target projection of the map and can be whatever you wish </span>
<span class="n">m</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;steelblue&#39;</span><span class="p">)</span> <span class="c1"># set background colour to &#39;steelblue&#39;.  </span>
</pre></div>
</div>
</section>
<section id="create-a-style">
<h3>Create a Style<a class="headerlink" href="#create-a-style" title="Link to this heading">¶</a></h3>
<p>Create the Styles which determines how the data is rendered:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span> <span class="c1"># style object to hold rules</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Rule</span><span class="p">()</span> <span class="c1"># rule object to hold symbolizers</span>
<span class="c1"># to fill a polygon we create a PolygonSymbolizer</span>
<span class="n">polygon_symbolizer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">PolygonSymbolizer</span><span class="p">()</span>
<span class="n">polygon_symbolizer</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;#f2eff9&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">polygon_symbolizer</span><span class="p">)</span> <span class="c1"># add the symbolizer to the rule object</span>

<span class="c1"># to add outlines to a polygon we create a LineSymbolizer</span>
<span class="n">line_symbolizer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">LineSymbolizer</span><span class="p">()</span>
<span class="n">line_symbolizer</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;rgb(50%,50%,50%)&#39;</span><span class="p">)</span>
<span class="n">line_symbolizer</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">r</span><span class="o">.</span><span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_symbolizer</span><span class="p">)</span> <span class="c1"># add the symbolizer to the rule object</span>
<span class="n">s</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c1"># now add the rule to the style and we&#39;re done</span>
</pre></div>
</div>
<p>And add the Style to the Map:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">append_style</span><span class="p">(</span><span class="s1">&#39;My Style&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="c1"># Styles are given names only as they are applied to the map</span>
</pre></div>
</div>
</section>
<section id="create-a-datasource">
<h3>Create a Datasource<a class="headerlink" href="#create-a-datasource" title="Link to this heading">¶</a></h3>
<p>In <em>Step 2</em> above you should have downloaded a sample shapefile of polygons of world countries. We are now going to load that into a <code class="docutils literal notranslate"><span class="pre">mapnik.Datasource</span></code> object in Python.</p>
<p>If your Python interpreter was launched from the same directory as you downloaded the natural earth shapefile to you should be able to use a relative path to create the datasource like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Shapefile</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;ne_110m_admin_0_countries.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Otherwise use an absolute path (exchanging <code class="docutils literal notranslate"><span class="pre">/Users/dane/Downloads/</span></code> for the correct path on your machine):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Shapefile</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;/Users/dane/Downloads/ne_110m_admin_0_countries.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note: optionally (to learn about your data) you can call the <code class="docutils literal notranslate"><span class="pre">envelope()</span></code> function off the datasource object to see the full coordinate bounds of the data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">envelope</span><span class="p">()</span>
<span class="go">Box2d(-180.0,-90.0,180.0,83.64513)</span>
</pre></div>
</div>
<p>That shows the minx, miny, maxx, and maxy of the data. Because the above coordinates are between -180 and 180 for the x or longitude values and -90 and 90 for the y or latitude values we know this data is in <em>geographic</em> coordinates and uses degrees for units - a pretty good indication this is <code class="docutils literal notranslate"><span class="pre">WGS84</span> <span class="pre">(aka</span> <span class="pre">EPSG:4326)</span></code>. This specific shapefile also stores this projection information as a <code class="docutils literal notranslate"><span class="pre">WKT</span></code> string in the <code class="docutils literal notranslate"><span class="pre">ne_110m_admin_0_countries.prj</span></code> file. See the <code class="docutils literal notranslate"><span class="pre">layer.srs</span></code> value below for why this matters.</p>
</section>
<section id="create-a-layer">
<h3>Create a Layer<a class="headerlink" href="#create-a-layer" title="Link to this heading">¶</a></h3>
<p>Mapnik Layers are basically containers around datasources, that store useful properties. Lets now create a Layer object and add the datasource to it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span> <span class="c1"># new layer called &#39;world&#39; (we could name it anything)</span>
<span class="c1"># note: layer.srs will default to &#39;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs&#39;</span>
</pre></div>
</div>
<p>Note: the 'layer.srs' is the source projection of the Datasource and <em>must</em> match the projection of the coordinates of that data or else your map will likely be blank. Mapnik uses <a class="reference external" href="http://trac.osgeo.org/proj/wiki/FAQ">Proj.4</a> strings to specify the spatial references system. In this case, the default <code class="docutils literal notranslate"><span class="pre">srs</span></code> Mapnik assumes (<code class="docutils literal notranslate"><span class="pre">+proj=longlat</span> <span class="pre">+ellps=WGS84</span> <span class="pre">+datum=WGS84</span> <span class="pre">+no_defs</span></code>) happens to match the projection of the data. When this is not the case you must set the layer.srs to the correct value (which is beyond the scope of this tutorial).</p>
<p>Now attach the datasource to the layer, and reference:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span><span class="o">.</span><span class="n">datasource</span> <span class="o">=</span> <span class="n">ds</span>
</pre></div>
</div>
<p>Lastly, we need to make sure the style we created above (and attached to the map) is also applied to the layer, by its string reference:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;My Style&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="prepare-the-map-for-rendering">
<h3>Prepare the Map for rendering<a class="headerlink" href="#prepare-the-map-for-rendering" title="Link to this heading">¶</a></h3>
<p>This step is critical. Finally add the layer to the map and zoom to the full extent of the data layer (using <code class="docutils literal notranslate"><span class="pre">zoom_all</span></code> which will calculate the cumulative extent of all layers attached to the map). If you do not zoom the Map to the extent of the layer(s), then the rendered output will be blank.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">zoom_all</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="render-your-map">
<h3>Render your map<a class="headerlink" href="#render-your-map" title="Link to this heading">¶</a></h3>
<p>Finish up by rendering your map image:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write the data to a png image called world.png in the current directory</span>
<span class="n">mapnik</span><span class="o">.</span><span class="n">render_to_file</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;world.png&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">)</span>

<span class="c1"># Exit the Python interpreter</span>
<span class="n">exit</span><span class="p">()</span> <span class="c1"># or ctrl-d</span>
</pre></div>
</div>
<p>Then back in your normal shell type:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On a mac</span>
open<span class="w"> </span>world.png
<span class="c1"># On windows</span>
start<span class="w"> </span>world.png
</pre></div>
</div>
<p>Or navigate to your base directory and open <code class="docutils literal notranslate"><span class="pre">world.png</span></code> and the result should look like this: ![world.png]</p>
</section>
<section id="step-4">
<h3>Step 4<a class="headerlink" href="#step-4" title="Link to this heading">¶</a></h3>
<p>The next logical step is to run that same code all at once as a Python script from your shell/terminal (rather than pasted into the Python interpreter line-by-line). This way you will be able to modify and experiment with the settings, then simply re-run the script.</p>
<p>So, create a blank text file called <code class="docutils literal notranslate"><span class="pre">world.py</span></code>.</p>
<p>Make it executable:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>chmod +x world.py
</pre></div>
</div>
<p>Then add a line at the top of the script like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
</pre></div>
</div>
<p>Finally, append the entire text below and save the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mapnik</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;steelblue&#39;</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Rule</span><span class="p">()</span>
<span class="n">polygon_symbolizer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">PolygonSymbolizer</span><span class="p">()</span>
<span class="n">polygon_symbolizer</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;#f2eff9&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">polygon_symbolizer</span><span class="p">)</span>

<span class="n">line_symbolizer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">LineSymbolizer</span><span class="p">()</span>
<span class="n">line_symbolizer</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;rgb(50%,50%,50%)&#39;</span><span class="p">)</span>
<span class="n">line_symbolizer</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="n">r</span><span class="o">.</span><span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_symbolizer</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">append_style</span><span class="p">(</span><span class="s1">&#39;My Style&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Shapefile</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;ne_110m_admin_0_countries.shp&#39;</span><span class="p">)</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">mapnik</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
<span class="n">layer</span><span class="o">.</span><span class="n">datasource</span> <span class="o">=</span> <span class="n">ds</span>
<span class="n">layer</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;My Style&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">zoom_all</span><span class="p">()</span>
<span class="n">mapnik</span><span class="o">.</span><span class="n">render_to_file</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;world.png&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;rendered image to &#39;world.png&#39;&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Don't forget to ensure the correct path to your <code class="docutils literal notranslate"><span class="pre">ne_110m_admin_0_countries.shp</span></code> shapefile.</p></li>
<li><p>Mapnik accepts both the absolute path to your data as well as the relative path (Same goes for the path to where you want to save your file)</p></li>
</ul>
<p>Finally run the script with the command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./world.py<span class="w"> </span><span class="c1"># You must be in the same directory as you saved the script</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Note: if you re-run this script it will will re-write over the world.png map.</p></li>
<li><p>Now you can easily open the script in a separate text editor and try changing the dimensions, colors, or datasource (remember to use the correct <code class="docutils literal notranslate"><span class="pre">srs</span></code> if you change the datasource).</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, hellowac
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial 1 -- Getting started in Python</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#step-1-check-installation">Step 1: check installation</a></li>
<li><a class="reference internal" href="#step-2">Step 2</a></li>
<li><a class="reference internal" href="#step-3">Step 3</a><ul>
<li><a class="reference internal" href="#import-mapnik">Import Mapnik</a></li>
<li><a class="reference internal" href="#create-a-map">Create a Map</a></li>
<li><a class="reference internal" href="#create-a-style">Create a Style</a></li>
<li><a class="reference internal" href="#create-a-datasource">Create a Datasource</a></li>
<li><a class="reference internal" href="#create-a-layer">Create a Layer</a></li>
<li><a class="reference internal" href="#prepare-the-map-for-rendering">Prepare the Map for rendering</a></li>
<li><a class="reference internal" href="#render-your-map">Render your map</a></li>
<li><a class="reference internal" href="#step-4">Step 4</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f115507d"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    </body>
</html>